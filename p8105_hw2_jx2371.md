p8105\_hw2\_jx2371
================
Jingyu Xu
2018/10/5

Firstly，I set a globle option which hides the message and warning information.

``` r
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
```

Problem 1
=========

read and clean the dataset
--------------------------

Firstly, a code chunck is writted to import the dataset

``` r
library(tidyverse)
NYC_Transit_data = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
```

Then, a code chunck is written to clean the data according to the reqirement. I name the manipulated dataset NYC\_Transit\_data1

``` r
NYC_Transit_data1=janitor::clean_names(NYC_Transit_data) %>%
  select(line:route11, entry, vending, entrance_type, ada)%>% #retain rows
  mutate(entry= ifelse(entry=="YES",TRUE,FALSE))#convert entry variable to logical variable
```

describe the dataset
--------------------

The original dataset contains variables including "Division, Line, Station Name, Station Latitude, Station Longitude, Route1, Route2, Route3, Route4, Route5, Route6, Route7, Route8, Route9, Route10, Route11, Entrance Type, Entry, Exit Only, Vending, Staffing, Staff Hours, ADA, ADA Notes, Free Crossover, North South Street, East West Street, Corner, Entrance Latitude, Entrance Longitude, Station Location, Entrance Location"
And the dataset we made some cleaning in the previous chunk contains variables including "line, station\_name, station\_latitude, station\_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance\_type, ada"

The original dataset contains variables including "Division, Line, Station Name, Station Latitude, Station Longitude, Route1, Route2, Route3, Route4, Route5, Route6, Route7, Route8, Route9, Route10, Route11, Entrance Type, Entry, Exit Only, Vending, Staffing, Staff Hours, ADA, ADA Notes, Free Crossover, North South Street, East West Street, Corner, Entrance Latitude, Entrance Longitude, Station Location, Entrance Location"

The data cleaning steps is described as following: 1)use janitor::clean\_names to transfer the variable names into lower snake case.

2)retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance.

3)convert the entry variable from character(YES VS NO) to a logical variable using ifelse function.

The dimension of the resulting dataset is 1868×19

I think the data is untidy, because some of the column names（route1-route11） are not names of variables, but still values of a variable. As a result of that, each row contains more than a single observation.

answers to dataset related questions
------------------------------------

1.There are 465 distinct stations.

2.There are 468staion that are ADA compliant.

3.The proportion of station entrance/exits without vending allow entrance is 0.0979657

4.a code chunk is wrote to reformat the data so that the route number and route name are distinct

``` r
gather(NYC_Transit_data1, key = route_number, value = route_name, route1:route11)
```

    ## # A tibble: 20,548 x 10
    ##    line  station_name station_latitude station_longitu~ entry vending
    ##    <chr> <chr>                   <dbl>            <dbl> <lgl> <chr>  
    ##  1 4 Av~ 25th St                  40.7            -74.0 TRUE  YES    
    ##  2 4 Av~ 25th St                  40.7            -74.0 TRUE  YES    
    ##  3 4 Av~ 36th St                  40.7            -74.0 TRUE  YES    
    ##  4 4 Av~ 36th St                  40.7            -74.0 TRUE  YES    
    ##  5 4 Av~ 36th St                  40.7            -74.0 TRUE  YES    
    ##  6 4 Av~ 45th St                  40.6            -74.0 TRUE  YES    
    ##  7 4 Av~ 45th St                  40.6            -74.0 TRUE  YES    
    ##  8 4 Av~ 45th St                  40.6            -74.0 TRUE  YES    
    ##  9 4 Av~ 45th St                  40.6            -74.0 TRUE  YES    
    ## 10 4 Av~ 53rd St                  40.6            -74.0 TRUE  YES    
    ## # ... with 20,538 more rows, and 4 more variables: entrance_type <chr>,
    ## #   ada <lgl>, route_number <chr>, route_name <chr>

5.Among the distinct stations, how many station serve the A train?

1.  Of the stations that serves A train, how many are ADA compliant?
